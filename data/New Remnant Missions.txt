# Copyright (c) 2017 by Michael Zahniser
# Copyright (c) 2018 by Zitchas
#
# Endless Sky is free software: you can redistribute it and/or modify it under the
# terms of the GNU General Public License as published by the Free Software
# Foundation, either version 3 of the License, or (at your option) any later version.
#
# Endless Sky is distributed in the hope that it will be useful, but WITHOUT ANY
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE.  See the GNU General Public License for more details.

mission "Remnant: Broken Jump Drive 1"
	name "Jump Drive (Broken)"
	minor
	invisible
	landing
	to offer
		has "remnant blood test pure"
	to complete
		has "Remnant: Broken Jump Drive 2: offered"
	source
		attributes "remnant"
	on offer
		conversation
			`The Remnant seem very interested in acquiring alien technology. Despite its broken nature, they might be interested in buying this partially functional Jump Drive. Do you want to ask someone about it?`
			choice
				`	(No.)`
					defer
				`	(Yes.)`
			`	You stop by the outfitters and ask one of the engineers if they would be interested. They immediately perk up and offer you <payment> in exchange for the broken jump drive.`
			choice
				`	"Sure, that sounds good."`
					goto end
				`	"Can you offer me more than that?"`
					goto more
				`	"How will my ship leave here without my jump drive?"`
			
			`	The engineer looks at you incredulously "You were relying on this for your interstellar travel? You are lucky you made it this far, indeed." He shakes his head in amusement, then continues "If you need a replacement, we have standard hyperdrives available in the outfitter."`
			choice
				`	"Okay, I accept your offer."`
					goto end
				`	"Sorry, I think I'll hold on to this for a while longer."`
					goto refuse
			
			label refuse
			`	He considers this, and sings, "If you wish. Our offer stands, whenever you choose to return."`
				defer
			
			label more
			`	"We do not have an infinite supply of wealth" he sings. "And we must budget our rewards in the expectation that we will need scores or even hundreds of these to unlock the secrets of Jump Drives." He pauses a moment, then continues. "While we cannot offer you more funds, we can offer you early access to the results: Contributing to our research could earn you a place among our test pilots someday when our researcher's work is complete."`
			choice
				`	"Okay, that sounds worthwhile then."`
					goto end
				`	"Sorry, I'm not interested right now."`
					goto refuse
			
			label end
			`	The Remnant engineers carefully remove the broken jump drive and whisk it away down into the tunnels. "Good hunting!" He sings as he hands you your payment. "We encourage you to salvage more of these whenever you have the opportunity."`
				accept
	
	on accept
		outfit "Jump Drive (Broken)" -1
		"remnant: broken jump drive count" ++
		payment 500000
		"reputation: Remnant" ++



mission "Remnant: Broken Jump Drive 2"
	name "More Broken Jump Drives"
	minor
	invisible
	landing
	to offer
		has "Remnant: Broken Jump Drive 1: offered"
	to complete
		has "Remnant: Broken Jump Drive 3: offered"
	source
		attributes "remnant"
	on offer
		conversation
			`This time when you land with a broken jump drive, an engineer is waiting at your landing pad with some heavy lifting equipment. Clearly he is hoping that you will be willing to sell it. Do you want to offer it to him?`
			choice
				`	(No.)`
					defer
				`	(Yes.)`
			`	When you exit the <ship>, the engineer approaches you. "Greetings, Captain <last>" he chants. "As before, our researchers would appreciate another malfunctioning jump drive to study. Would you be willing to provide it?`
			choice
				`	"Sorry, I would rather keep this one for now, but you can have it later."`
					defer
				`	"Yes, I would be happy to."`
			`	Once again, they delicately remove the broken jump drive, and pay you far more than you could ever get for such wreckage elsewhere. "Our researchers are thoroughly enjoying digging into these enigmas" the engineer sings. "Hopefully they will lead to future innovations for the Remnant."`
			choice
				`	"Then I will continue to bring them to you."`
					accept
				`	"Can you tell me what they are researching?"`
			`	"Not yet. There is nothing concrete to share as of yet, but the more they have to work with," he eyes the broken jump drive meaningfully, "the more progress can be made." You assure him that you will continue to bring any that you find to them.`
				accept
	
	on accept
		outfit "Jump Drive (Broken)" -1
		"remnant: broken jump drive count" ++
		payment 500000
		"reputation: Remnant" ++
		fail "Remnant: Broken Jump Drive 1"



mission "Remnant: Broken Jump Drive 3"
	name "More Jump Drives"
	minor
	invisible
	landing
	to offer
		has "Remnant: Broken Jump Drive 2: offered"
	to complete
		has "Remnant: Broken Jump Drive 4: offered"
	source
		attributes "remnant"
	on offer
		conversation
			`You have salvaged another broken jump drive, and the Remnant seemed eager to pay you for them. Would you like to offer them this one?`
			choice
				`	(No.)`
					defer
				`	(Yes.)`
			`	You stop by the Outfitter, and discover that the engineer there has placed a standing offer for broken jump drives. "We are always eager to have more" he sings enthusiastically.`
			choice
				`	"Is there any progress on the research I could hear about?"`
				`	"Excellent, I will continue to bring any others I find."`
					accept
			`	The engineer checks his terminal, and after skimming a bit he looks up again. "Well, it looks like there are several different teams working on this. The one that has updated their most recent report is looking into the similarities between standard hyperdrives and these broken jump drives. As you might expect, a device like these should not suddenly change functionality to perfectly match a completely different sort of device just because it was damaged. The researchers think that this down-stepping failure might be significant in understanding what jump drives even are."`
			`	The engineer continues to share excerpts from various research team's reports with you, and it becomes increasingly clear that while it appears that the Remnant are making significant discoveries in several different directions, they are probably a very long way from anything definitive.`
				accept
	
	on accept
		event "remnant research update bjd1" 100 200
		outfit "Jump Drive (Broken)" -1
		"remnant: broken jump drive count" ++
		payment 500000
		"reputation: Remnant" ++
		fail "Remnant: Broken Jump Drive 2"

event "remnant research update bjd1"
# bjd1 = Broken Jump Drive 1. This event is included for forward compatibility with future missions that will require this event to be complete.


mission "Remnant: Broken Jump Drive 4"
	repeat
	minor
	invisible
	to offer
		has "Remnant: Broken Jump Drive 3: offered"
	to complete
		never
	source
		attributes "remnant"
	on offer
		conversation
			`Would you like to contribute another jump drive to the Remnant?`
			choice
				`	(No.)`
					defer
				`	(Yes.)`
			`	One of the outfitter engineers happily unloads the broken jump drive from your ship and pays you <payment>. They cheerfully tell you that there has been some progress by the various research teams, but nothing concrete as of yet.`
				accept
	
	on accept
		outfit "Jump Drive" -1
		"remnant: broken jump drive count" ++
		payment 500000
		"reputation: Remnant" ++
		fail "Remnant: Broken Jump Drive 3"
		fail "Remnant: Broken Jump Drive 4"